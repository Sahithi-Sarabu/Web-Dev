{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/chat.js","webpack:///./src/serviceCalls.js"],"names":["appState","pollId","isLoggedIn","messages","users","error","page","document","querySelector","renderPage","renderLogin","renderChat","renderErrors","messagesList","usersList","innerHTML","renderMessages","renderUsers","userPage","Object","values","map","user","join","chat","message","time","show","addEventListener","e","target","classList","contains","name","previousElementSibling","value","fetchLogin","then","chatInfo","poll","err","messageBody","fetchMessage","clearTimeout","fetchLogout","text","shouldPoll","setInterval","fetchChatInfo","fetchLoginStatus","fetch","method","Promise","reject","response","ok","username","headers","body","JSON","stringify","json"],"mappings":"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","file":"chat.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/chat.js\");\n","import {\r\n    fetchLoginStatus,\r\n    fetchLogin,\r\n    fetchChatInfo,\r\n    fetchMessage,\r\n    fetchLogout,\r\n} from './serviceCalls';\r\n\r\nconst appState = {\r\n    pollId: null,\r\n    isLoggedIn: false,\r\n    messages: {},\r\n    users: {},\r\n    error: '',\r\n};\r\n\r\nconst page = document.querySelector('.main');\r\n\r\nfunction renderPage() {\r\n    if(!appState.isLoggedIn)  {\r\n      renderLogin();\r\n    } else {\r\n      renderChat(appState.messages, appState.users);\r\n    }\r\n    renderErrors(appState.error);\r\n}\r\n\r\n\r\nfunction renderChat( messagesList, usersList) {\r\n    page.innerHTML = `\r\n    <h2>Just Chat</h2>\r\n      <button class=\"logout-button\">Logout</button> \r\n      <div class=\"outgoing\">\r\n          <input class=\"new-message\" placeholder=\"Enter a message\"/><button class=\"add\">Send</button>\r\n      </div>\r\n      <div class=\"chat-content\">\r\n        <ul class=\"users\"></ul>\r\n        <ul class=\"messages\"></ul>\r\n      </div>`\r\n      renderMessages(messagesList);\r\n      renderUsers(usersList);\r\n}\r\n\r\nfunction renderUsers( usersList ){\r\n    const userPage = page.querySelector('.users');\r\n    userPage.innerHTML = Object.values(usersList).map( (user) =>{\r\n        return `\r\n        <li>${user}</li>`;\r\n    }).join('');\r\n};\r\n\r\nfunction renderMessages( messages ) {\r\n    const chat = page.querySelector('.messages');\r\n    chat.innerHTML = Object.values(messages).map( (message) => {\r\n        return `\r\n        <li>\r\n        <div class=\"user-info\">\r\n          <span class=\"user-name\">${message.user}</span>\r\n          <span class=\"time\">${message.time}</span>\r\n        </div>\r\n\r\n        <span class=\"message\">${message.message}</span>\r\n        </li>`;\r\n    }).join('');\r\n};\r\n\r\nfunction renderLogin( show ) {\r\n    page.innerHTML = '<div class=\"login\"><input class=\"user-name\" placeholder=\"Enter your name\"/><button class=\"add-user\">Login</button></div>';\r\n}\r\n\r\npage.addEventListener('click', (e) =>{\r\n    if(e.target.classList.contains('add-user')){\r\n        const name = e.target.previousElementSibling.value;\r\n        fetchLogin(name)\r\n        .then( chatInfo => {\r\n            appState.isLoggedIn = true;\r\n            appState.users = chatInfo[0];\r\n            appState.messages = chatInfo[1];\r\n            appState.error = '';\r\n            poll(true);\r\n            renderPage();\r\n        })\r\n        .catch( err => {\r\n            appState.error = err.error;\r\n            renderPage();\r\n        });\r\n    }\r\n\r\n    if(e.target.classList.contains('add')){\r\n        const messageBody = e.target.previousElementSibling.value;\r\n        fetchMessage(messageBody)\r\n        .then( chatInfo => {\r\n            appState.isLoggedIn = true;\r\n            appState.users = chatInfo[0];\r\n            appState.messages = chatInfo[1];\r\n            appState.error = '';\r\n            poll(true);\r\n            renderPage();\r\n        })\r\n        .catch( err =>{\r\n            if(err.error == 'Unauthorized user' || err.error == 'User not allowed'){\r\n                appState.isLoggedIn = false;\r\n                clearTimeout(appState.pollId);\r\n                appState.pollId = null;\r\n            }\r\n            appState.error = err.error;\r\n            renderPage();\r\n        });\r\n    }\r\n\r\n    if(e.target.classList.contains('logout-button')){\r\n        fetchLogout()\r\n        .then( () =>{\r\n            appState.isLoggedIn = false;\r\n            appState.error = '';\r\n            poll(false);\r\n            renderPage();\r\n        })\r\n        .catch( err => {\r\n            appState.error = err;\r\n            renderPage();\r\n        })\r\n    }\r\n})\r\n  \r\nfunction renderErrors( text ) {\r\n    document.querySelector('.status').innerHTML = text;\r\n}\r\n\r\nfunction poll(shouldPoll) {\r\n    if( shouldPoll && !appState.pollId ) {\r\n      appState.pollId = setInterval( () => {\r\n        fetchChatInfo()\r\n        .then( chatInfo => {\r\n          appState.users = chatInfo[0];\r\n          appState.messages = chatInfo[1];\r\n          renderPage();\r\n        })\r\n        .catch( err => {\r\n            if(err.error == 'Unauthorized user' || err.error == 'User not allowed'){\r\n                appState.isLoggedIn = false;\r\n                clearTimeout(appState.pollId);\r\n                appState.pollId = null;\r\n            }\r\n            appState.error = err.error;\r\n            renderPage();\r\n        });\r\n      }, 8000);\r\n    }\r\n    \r\n    if( !shouldPoll && appState.pollId ) {\r\n      clearTimeout(appState.pollId);\r\n      appState.pollId = null;\r\n    }\r\n}\r\n\r\nfetchLoginStatus()\r\n.then( () => {\r\n    appState.isLoggedIn = true;\r\n    poll(true);\r\n    renderPage();\r\n})\r\n.catch( () => {\r\n    appState.isLoggedIn = false;\r\n    renderPage();\r\n});","export const fetchLoginStatus = () =>{\r\n    return fetch('/session',{\r\n        method:'GET',\r\n      })\r\n      .catch( () => Promise.reject({ error: 'network-error' }))\r\n      .then( (response) =>{\r\n        if(!response.ok){\r\n          return Promise.reject({ error: 'login-invalid' });\r\n        }\r\n        return;\r\n    });\r\n}\r\n\r\nexport const fetchLogin = (username) =>{\r\n    return fetch('/session', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ name: username }),\r\n    })\r\n    .catch( () => Promise.reject({ error: 'network-error'}))\r\n    .then( (response) => {\r\n        if(!response.ok){\r\n            return response.json().then( err => Promise.reject(err));\r\n        }\r\n        return response.json();\r\n    });\r\n}\r\n\r\nexport const fetchMessage = (message) =>{\r\n    return fetch('/message', {\r\n        method: 'POST',\r\n        headers: {'Content-Type': 'application/json'},\r\n        body: JSON.stringify({ message: message}),\r\n    })\r\n    .catch( () => Promise.reject({ error: 'network-error'}))\r\n    .then( (response) => {\r\n        if(!response.ok){\r\n            return response.json().then( err => Promise.reject(err));\r\n        }\r\n        return response.json();\r\n    });\r\n}\r\n\r\nexport const fetchLogout = () => {\r\n    return fetch('/session', {\r\n        method: 'DELETE',\r\n    })\r\n    .catch( () => Promise.reject({ error: 'network-error'}))\r\n    .then( (response) => {\r\n        if(!response.ok){\r\n            return Promise.reject({ error: 'Error logging out'})\r\n        }\r\n        return;\r\n    });\r\n}\r\n\r\nexport const fetchChatInfo = () =>{\r\n    return fetch('/chat', {\r\n        method: 'GET',\r\n    })\r\n    .catch( () => Promise.reject( {error: 'network-error'}))\r\n    .then( (response) => {\r\n        if(!response.ok){\r\n            return response.json().then(err => Promise.reject(err));\r\n        }\r\n        return response.json();\r\n    });\r\n}"],"sourceRoot":""}